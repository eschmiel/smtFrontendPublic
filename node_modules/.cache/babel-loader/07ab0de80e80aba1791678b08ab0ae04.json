{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import'../../css/login/AccountForm.css';var CreateAccountForm=/*#__PURE__*/function(_React$Component){_inherits(CreateAccountForm,_React$Component);var _super=_createSuper(CreateAccountForm);function CreateAccountForm(props){var _this;_classCallCheck(this,CreateAccountForm);_this=_super.call(this,props);_this.state={username:'',password:''};_this.handleFormChange=_this.handleFormChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleMenuStateChange=_this.handleMenuStateChange.bind(_assertThisInitialized(_this));return _this;}_createClass(CreateAccountForm,[{key:\"handleFormChange\",value:function handleFormChange(event){switch(event.target.name){case'username':this.setState({username:event.target.value});break;case'password':this.setState({password:event.target.value});break;default:console.log(\"Attemped to set state on something that is not a create account form field\");break;}}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var newUserData,createUserRequest,loginRequest,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();newUserData=new FormData();newUserData.append('username',this.state.username);newUserData.append('password',this.state.password);createUserRequest=new Request('https://streamtoggle-backend.herokuapp.com/account/createUserAccount',{method:'POST',credentials:'include',body:newUserData});_context.next=7;return fetch(createUserRequest);case 7:loginRequest=new Request('https://streamtoggle-backend.herokuapp.com/login',{method:'POST',credentials:'include',body:newUserData});_context.next=10;return fetch(loginRequest);case 10:response=_context.sent;_context.next=13;return response.json();case 13:data=_context.sent;this.props.onLogin(data.username);case 15:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"handleMenuStateChange\",value:function handleMenuStateChange(){this.props.onMenuStateChange('LoggingIn');}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"CreateAccountContent\"},/*#__PURE__*/React.createElement(\"div\",{className:\"AccountFormContainer\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Create Account\"),/*#__PURE__*/React.createElement(\"form\",{className:\"AccountForm\",onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{for:\"username\"},\"Username: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"username\",name:\"username\",value:this.state.username,onChange:this.handleFormChange,required:true})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{for:\"password\"},\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"password\",name:\"password\",value:this.state.password,onChange:this.handleFormChange,required:true})),/*#__PURE__*/React.createElement(\"li\",{className:\"CreateAccountFormBtns\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"ContentBtn\"},\"Create Account\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"ContentBtn\",onClick:this.handleMenuStateChange},\"Cancel\"))))));}}]);return CreateAccountForm;}(React.Component);export default CreateAccountForm;","map":{"version":3,"sources":["C:/repos/streamToggle/frontend/src/components/login/createAccountForm.js"],"names":["React","CreateAccountForm","props","state","username","password","handleFormChange","bind","handleSubmit","handleMenuStateChange","event","target","name","setState","value","console","log","preventDefault","newUserData","FormData","append","createUserRequest","Request","method","credentials","body","fetch","loginRequest","response","json","data","onLogin","onMenuStateChange","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../../css/login/AccountForm.css';\r\n\r\nclass CreateAccountForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: ''\r\n        };\r\n\r\n        this.handleFormChange = this.handleFormChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleMenuStateChange = this.handleMenuStateChange.bind(this);\r\n    }\r\n\r\n\r\n    handleFormChange(event) {\r\n        switch (event.target.name) {\r\n            case 'username': this.setState({ username: event.target.value }); break;\r\n            case 'password': this.setState({ password: event.target.value }); break;\r\n            default: console.log(\"Attemped to set state on something that is not a create account form field\"); break;\r\n        }\r\n    }\r\n\r\n\r\n    async handleSubmit(event) {\r\n        event.preventDefault();\r\n\r\n        let newUserData = new FormData();\r\n\r\n        newUserData.append('username', this.state.username);\r\n        newUserData.append('password', this.state.password);\r\n\r\n        let createUserRequest = new Request('https://streamtoggle-backend.herokuapp.com/account/createUserAccount',\r\n            {\r\n                method: 'POST',\r\n                credentials: 'include',\r\n                body: newUserData\r\n            });\r\n\r\n        await fetch(createUserRequest);\r\n\r\n        let loginRequest = new Request('https://streamtoggle-backend.herokuapp.com/login',\r\n            {\r\n                method: 'POST',\r\n                credentials: 'include',\r\n                body: newUserData,                \r\n            });\r\n\r\n        let response = await fetch(loginRequest);\r\n        let data = await response.json();\r\n        this.props.onLogin(data.username);\r\n    }\r\n\r\n\r\n    handleMenuStateChange() {\r\n        this.props.onMenuStateChange('LoggingIn');\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"CreateAccountContent\">\r\n                \r\n                <div className=\"AccountFormContainer\">\r\n                    <h2>Create Account</h2>\r\n                    <form className=\"AccountForm\" onSubmit={this.handleSubmit} >\r\n                        <ul>\r\n                            <li>\r\n                                <label for=\"username\">Username: </label>\r\n                                <input type=\"text\" id=\"username\" name=\"username\" value={this.state.username} onChange={this.handleFormChange} required />\r\n                            </li>\r\n                            <li>\r\n                                <label for=\"password\">Password: </label>\r\n                                <input type=\"text\" id=\"password\" name=\"password\" value={this.state.password} onChange={this.handleFormChange} required />\r\n                            </li>\r\n                            <li className=\"CreateAccountFormBtns\">\r\n                                <button type=\"submit\" className=\"ContentBtn\">Create Account</button>\r\n                                <button type=\"button\" className=\"ContentBtn\" onClick={this.handleMenuStateChange}>Cancel</button>\r\n                            </li>\r\n                        </ul>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CreateAccountForm;"]},"metadata":{},"sourceType":"module"}