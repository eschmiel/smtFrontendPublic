{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\repos\\\\streamToggle\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import'../../../css/submenu/UnlinkAccountsMenu.css';import UnlinkAccountConfirmMenu from'./unlinkAccountConfirmMenu.js';import UnlinkAccountSelectMenu from'./unlinkAccountSelectMenu.js';var UnlinkAccountsMenu=/*#__PURE__*/function(_React$Component){_inherits(UnlinkAccountsMenu,_React$Component);var _super=_createSuper(UnlinkAccountsMenu);function UnlinkAccountsMenu(props){var _this;_classCallCheck(this,UnlinkAccountsMenu);_this=_super.call(this,props);var unlinkAccountMenuItemsHelper=props.linkedAccounts.map(function(twitterAccount){return{account_id:twitterAccount.account_id,screen_name:twitterAccount.screen_name,selected:false};});_this.state={menuState:'Select',unlinkAccountMenuItems:unlinkAccountMenuItemsHelper};_this.changeMenuState=_this.changeMenuState.bind(_assertThisInitialized(_this));_this.handleSelectMenuConfirm=_this.handleSelectMenuConfirm.bind(_assertThisInitialized(_this));_this.select=_this.select.bind(_assertThisInitialized(_this));_this.getSelectedAccounts=_this.getSelectedAccounts.bind(_assertThisInitialized(_this));_this.unlinkAccount=_this.unlinkAccount.bind(_assertThisInitialized(_this));return _this;}_createClass(UnlinkAccountsMenu,[{key:\"changeMenuState\",value:function changeMenuState(event){this.setState({menuState:event.target.id});}},{key:\"handleSelectMenuConfirm\",value:function handleSelectMenuConfirm(event){if(this.getSelectedAccounts().length)this.changeMenuState(event);}},{key:\"select\",value:function select(account_id){var indexOfSelected=this.state.unlinkAccountMenuItems.findIndex(function(account){return account.account_id===account_id;});var unlinkAccountMenuItemsEdits=this.state.unlinkAccountMenuItems.map(function(account,index){if(index===indexOfSelected){account.selected=!account.selected;}return account;});this.setState({unlinkAccountMenuItems:unlinkAccountMenuItemsEdits});}},{key:\"getSelectedAccounts\",value:function getSelectedAccounts(){var selectedAccounts=this.state.unlinkAccountMenuItems.filter(function(account){return account.selected;});return selectedAccounts;}},{key:\"unlinkAccount\",value:function(){var _unlinkAccount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestUrl,requestData,selectedAccounts,unlinkRequest;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:requestUrl='https://smt-backend-naqfi.ondigitalocean.app/account/unlinkTwitterAccount';requestData=new FormData();selectedAccounts=this.getSelectedAccounts();selectedAccounts.forEach(function(account){return requestData.append('account_id[]',account.account_id);});unlinkRequest=new Request(requestUrl,{method:'POST',credentials:'include',body:requestData});_context.next=7;return fetch(unlinkRequest);case 7:this.props.refreshLinkedAccounts();this.props.refreshTweets();this.props.changeSubmenuState();case 10:case\"end\":return _context.stop();}}},_callee,this);}));function unlinkAccount(){return _unlinkAccount.apply(this,arguments);}return unlinkAccount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,this.state.menuState==='Select'?/*#__PURE__*/React.createElement(UnlinkAccountSelectMenu,{unlinkAccountMenuItems:this.state.unlinkAccountMenuItems,onSelect:this.select,onConfirm:this.handleSelectMenuConfirm,onCancel:this.props.changeSubmenuState}):this.state.menuState==='Confirm'?/*#__PURE__*/React.createElement(UnlinkAccountConfirmMenu,{selectedAccounts:this.getSelectedAccounts(),onCancel:this.changeMenuState,onConfirm:this.unlinkAccount}):'');}}]);return UnlinkAccountsMenu;}(React.Component);export default UnlinkAccountsMenu;","map":{"version":3,"sources":["C:/repos/streamToggle/frontend/src/components/submenu/unlinkAccountMenu/unlinkAccountMenu.js"],"names":["React","UnlinkAccountConfirmMenu","UnlinkAccountSelectMenu","UnlinkAccountsMenu","props","unlinkAccountMenuItemsHelper","linkedAccounts","map","twitterAccount","account_id","screen_name","selected","state","menuState","unlinkAccountMenuItems","changeMenuState","bind","handleSelectMenuConfirm","select","getSelectedAccounts","unlinkAccount","event","setState","target","id","length","indexOfSelected","findIndex","account","unlinkAccountMenuItemsEdits","index","selectedAccounts","filter","requestUrl","requestData","FormData","forEach","append","unlinkRequest","Request","method","credentials","body","fetch","refreshLinkedAccounts","refreshTweets","changeSubmenuState","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../../../css/submenu/UnlinkAccountsMenu.css';\r\nimport UnlinkAccountConfirmMenu from './unlinkAccountConfirmMenu.js';\r\nimport UnlinkAccountSelectMenu from './unlinkAccountSelectMenu.js';\r\n\r\nclass UnlinkAccountsMenu extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let unlinkAccountMenuItemsHelper = props.linkedAccounts.map((twitterAccount) => { return { account_id: twitterAccount.account_id, screen_name: twitterAccount.screen_name, selected: false } })\r\n\r\n        this.state = {\r\n            menuState: 'Select',\r\n            unlinkAccountMenuItems: unlinkAccountMenuItemsHelper\r\n        };\r\n\r\n        this.changeMenuState = this.changeMenuState.bind(this);\r\n        this.handleSelectMenuConfirm = this.handleSelectMenuConfirm.bind(this);\r\n        this.select = this.select.bind(this);\r\n        this.getSelectedAccounts = this.getSelectedAccounts.bind(this);\r\n        this.unlinkAccount = this.unlinkAccount.bind(this);\r\n    }\r\n\r\n\r\n    changeMenuState(event) {\r\n        this.setState({ menuState: event.target.id });\r\n    }\r\n\r\n\r\n    handleSelectMenuConfirm(event) {\r\n        if (this.getSelectedAccounts().length) this.changeMenuState(event);\r\n    }\r\n\r\n\r\n    select(account_id) {\r\n        let indexOfSelected = this.state.unlinkAccountMenuItems.findIndex((account) => account.account_id === account_id);\r\n\r\n        let unlinkAccountMenuItemsEdits = this.state.unlinkAccountMenuItems.map((account, index) => {\r\n            if (index === indexOfSelected) { account.selected = !account.selected; }\r\n            return account;\r\n        });\r\n\r\n        this.setState({ unlinkAccountMenuItems: unlinkAccountMenuItemsEdits });\r\n    }\r\n\r\n\r\n    getSelectedAccounts() {\r\n        let selectedAccounts = this.state.unlinkAccountMenuItems.filter((account) => account.selected);\r\n\r\n        return selectedAccounts;\r\n    }\r\n\r\n\r\n    async unlinkAccount() {\r\n        const requestUrl = 'https://smt-backend-naqfi.ondigitalocean.app/account/unlinkTwitterAccount';\r\n        let requestData = new FormData();\r\n        let selectedAccounts = this.getSelectedAccounts();\r\n\r\n        selectedAccounts.forEach(account => requestData.append('account_id[]', account.account_id));\r\n\r\n        let unlinkRequest = new Request(requestUrl,\r\n            {\r\n                method: 'POST',\r\n                credentials: 'include',\r\n                body: requestData\r\n            });\r\n\r\n        await fetch(unlinkRequest);\r\n\r\n        this.props.refreshLinkedAccounts();\r\n        this.props.refreshTweets();       \r\n        this.props.changeSubmenuState();\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.menuState === 'Select' ? <UnlinkAccountSelectMenu unlinkAccountMenuItems={this.state.unlinkAccountMenuItems}\r\n                    onSelect={this.select} onConfirm={this.handleSelectMenuConfirm} onCancel={this.props.changeSubmenuState} />\r\n                    : this.state.menuState === 'Confirm' ? <UnlinkAccountConfirmMenu selectedAccounts={this.getSelectedAccounts()} onCancel={this.changeMenuState} onConfirm={this.unlinkAccount}/> \r\n                :''}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default UnlinkAccountsMenu;"]},"metadata":{},"sourceType":"module"}